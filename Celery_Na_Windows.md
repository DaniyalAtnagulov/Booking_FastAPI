Если вы работаете на Windows, всегда указывайте --pool=solo при запуске Celery, иначе задачи не будут выполняться. Для других ОС такого ограничения нет.

Перед запуском celery в консоли надо запустить файл redis-server, про который говорилось в разделе 2.2. Иначе будет ошибка, что celery не может подключиться к redis.

Пример команды для запуска Celery (запускать в корневой директории проекта): 

celery -A app.tasks.celery_app:celery worker --loglevel=INFO --pool=solo


Если хотите что-то сделать с данными в базе данных, то используйте обёртку loop.run_until_complete(my_async_function). В этом курсе запросы в бд асинхронные. В селери нет поддержки асинхронных запросов. Это похоже на хак, но иначе ни как 

import asyncio

@celery.task
def update_ip_user(ip):
    loop = asyncio.get_event_loop()
    # UserOnlineDAO.find_all() - асинхронная функция
    items = loop.run_until_complete(UserOnlineDAO.find_all())

 

Если не хотите связываться с селери из-за отсутствия поддержки асинхронных функций, то можете использовать background_tasks. Там есть поддержка асинхронных функций. Разумеется, синхронные функции там тоже прекрасно работают )
